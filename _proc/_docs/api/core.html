<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.280">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="Defines central classes that are re-used throughout the findmycells package (findmycells.core)">

<title>findmycells - core</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
<meta property="og:title" content="findmycells - core">
<meta property="og:description" content="Defines central classes that are re-used throughout the findmycells package (findmycells.core)">
<meta property="og:site-name" content="findmycells">
<meta name="twitter:title" content="findmycells - core">
<meta name="twitter:description" content="Defines central classes that are re-used throughout the findmycells package (findmycells.core)">
<meta name="twitter:card" content="summary">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">findmycells</span>
    </a>
  </div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">core</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">findmycells</a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">api</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../api/index.html" class="sidebar-item-text sidebar-link">documentation overview</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../api/configs.html" class="sidebar-item-text sidebar-link">configs</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../api/core.html" class="sidebar-item-text sidebar-link active">core</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../api/database.html" class="sidebar-item-text sidebar-link">database</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../api/interfaces.html" class="sidebar-item-text sidebar-link">interfaces</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../api/readers_00_specs.html" class="sidebar-item-text sidebar-link">reader specifications</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../api/readers_01_microscopy_images.html" class="sidebar-item-text sidebar-link">readers for microscopy images</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../api/readers_02_rois.html" class="sidebar-item-text sidebar-link">readers for ROI-files</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../api/preprocessing_00_specs.html" class="sidebar-item-text sidebar-link">preprocessing subclasses</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../api/preprocessing_01_strategies.html" class="sidebar-item-text sidebar-link">preprocessing options</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../api/segmentation_00_specs.html" class="sidebar-item-text sidebar-link">segmentation subclasses</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../api/segmentation_01_strategies.html" class="sidebar-item-text sidebar-link">segmentation strategies</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../api/postprocessing_00_specs.html" class="sidebar-item-text sidebar-link">postprocessing subclasses</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../api/postprocessing_01_strategies.html" class="sidebar-item-text sidebar-link">postprocessing options</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../api/quantification_00_specs.html" class="sidebar-item-text sidebar-link">quantification subclasses</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../api/quantification_01_strategies.html" class="sidebar-item-text sidebar-link">quantification strategies</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../api/inspection_00_methods.html" class="sidebar-item-text sidebar-link">inspection</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../api/utils.html" class="sidebar-item-text sidebar-link">utility functions</a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">tutorials</a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tutorials/api_tutorial.html" class="sidebar-item-text sidebar-link">API tutorial</a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../tutorials/gui_tutorial.html" class="sidebar-item-text sidebar-link">GUI tutorial</a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#handling-data-processing" id="toc-handling-data-processing" class="nav-link active" data-scroll-target="#handling-data-processing">Handling data processing</a>
  <ul class="collapse">
  <li><a href="#processingobject" id="toc-processingobject" class="nav-link" data-scroll-target="#processingobject">ProcessingObject</a></li>
  <li><a href="#processingobject.export_current_gui_config_values" id="toc-processingobject.export_current_gui_config_values" class="nav-link" data-scroll-target="#processingobject.export_current_gui_config_values">ProcessingObject.export_current_gui_config_values</a></li>
  <li><a href="#processingobject.initialize_gui_configs_and_widget" id="toc-processingobject.initialize_gui_configs_and_widget" class="nav-link" data-scroll-target="#processingobject.initialize_gui_configs_and_widget">ProcessingObject.initialize_gui_configs_and_widget</a></li>
  <li><a href="#processingobject.prepare_for_processing" id="toc-processingobject.prepare_for_processing" class="nav-link" data-scroll-target="#processingobject.prepare_for_processing">ProcessingObject.prepare_for_processing</a></li>
  <li><a href="#processingobject.run_all_strategies" id="toc-processingobject.run_all_strategies" class="nav-link" data-scroll-target="#processingobject.run_all_strategies">ProcessingObject.run_all_strategies</a></li>
  <li><a href="#processingobject.update_database" id="toc-processingobject.update_database" class="nav-link" data-scroll-target="#processingobject.update_database">ProcessingObject.update_database</a></li>
  <li><a href="#processingobject.default_configs" id="toc-processingobject.default_configs" class="nav-link" data-scroll-target="#processingobject.default_configs">ProcessingObject.default_configs</a></li>
  <li><a href="#processingobject.descriptions" id="toc-processingobject.descriptions" class="nav-link" data-scroll-target="#processingobject.descriptions">ProcessingObject.descriptions</a></li>
  <li><a href="#processingobject.processing_type" id="toc-processingobject.processing_type" class="nav-link" data-scroll-target="#processingobject.processing_type">ProcessingObject.processing_type</a></li>
  <li><a href="#processingobject.tooltips" id="toc-processingobject.tooltips" class="nav-link" data-scroll-target="#processingobject.tooltips">ProcessingObject.tooltips</a></li>
  <li><a href="#processingobject.widget_names" id="toc-processingobject.widget_names" class="nav-link" data-scroll-target="#processingobject.widget_names">ProcessingObject.widget_names</a></li>
  <li><a href="#processingobject._add_processing_specific_infos_to_updates" id="toc-processingobject._add_processing_specific_infos_to_updates" class="nav-link" data-scroll-target="#processingobject._add_processing_specific_infos_to_updates">ProcessingObject._add_processing_specific_infos_to_updates</a></li>
  <li><a href="#processingobject._processing_specific_preparations" id="toc-processingobject._processing_specific_preparations" class="nav-link" data-scroll-target="#processingobject._processing_specific_preparations">ProcessingObject._processing_specific_preparations</a></li>
  <li><a href="#processingstrategy" id="toc-processingstrategy" class="nav-link" data-scroll-target="#processingstrategy">ProcessingStrategy</a></li>
  <li><a href="#processingstrategy.export_current_gui_config_values" id="toc-processingstrategy.export_current_gui_config_values" class="nav-link" data-scroll-target="#processingstrategy.export_current_gui_config_values">ProcessingStrategy.export_current_gui_config_values</a></li>
  <li><a href="#processingstrategy.initialize_gui_configs_and_widget" id="toc-processingstrategy.initialize_gui_configs_and_widget" class="nav-link" data-scroll-target="#processingstrategy.initialize_gui_configs_and_widget">ProcessingStrategy.initialize_gui_configs_and_widget</a></li>
  <li><a href="#processingstrategy.update_tracking_histories" id="toc-processingstrategy.update_tracking_histories" class="nav-link" data-scroll-target="#processingstrategy.update_tracking_histories">ProcessingStrategy.update_tracking_histories</a></li>
  <li><a href="#processingstrategy.default_configs" id="toc-processingstrategy.default_configs" class="nav-link" data-scroll-target="#processingstrategy.default_configs">ProcessingStrategy.default_configs</a></li>
  <li><a href="#processingstrategy.descriptions" id="toc-processingstrategy.descriptions" class="nav-link" data-scroll-target="#processingstrategy.descriptions">ProcessingStrategy.descriptions</a></li>
  <li><a href="#processingstrategy.processing_type" id="toc-processingstrategy.processing_type" class="nav-link" data-scroll-target="#processingstrategy.processing_type">ProcessingStrategy.processing_type</a></li>
  <li><a href="#processingstrategy.tooltips" id="toc-processingstrategy.tooltips" class="nav-link" data-scroll-target="#processingstrategy.tooltips">ProcessingStrategy.tooltips</a></li>
  <li><a href="#processingstrategy.widget_names" id="toc-processingstrategy.widget_names" class="nav-link" data-scroll-target="#processingstrategy.widget_names">ProcessingStrategy.widget_names</a></li>
  <li><a href="#processingstrategy.dropdown_option_value_for_gui" id="toc-processingstrategy.dropdown_option_value_for_gui" class="nav-link" data-scroll-target="#processingstrategy.dropdown_option_value_for_gui">ProcessingStrategy.dropdown_option_value_for_gui</a></li>
  <li><a href="#processingstrategy.run" id="toc-processingstrategy.run" class="nav-link" data-scroll-target="#processingstrategy.run">ProcessingStrategy.run</a></li>
  <li><a href="#processingstrategy._add_strategy_specific_infos_to_updates" id="toc-processingstrategy._add_strategy_specific_infos_to_updates" class="nav-link" data-scroll-target="#processingstrategy._add_strategy_specific_infos_to_updates">ProcessingStrategy._add_strategy_specific_infos_to_updates</a></li>
  </ul></li>
  <li><a href="#handling-data-import" id="toc-handling-data-import" class="nav-link" data-scroll-target="#handling-data-import">Handling data import</a>
  <ul class="collapse">
  <li><a href="#datareader" id="toc-datareader" class="nav-link" data-scroll-target="#datareader">DataReader</a></li>
  <li><a href="#datareader.read" id="toc-datareader.read" class="nav-link" data-scroll-target="#datareader.read">DataReader.read</a></li>
  <li><a href="#datareader.assert_correct_output_format" id="toc-datareader.assert_correct_output_format" class="nav-link" data-scroll-target="#datareader.assert_correct_output_format">DataReader.assert_correct_output_format</a></li>
  <li><a href="#dataloader" id="toc-dataloader" class="nav-link" data-scroll-target="#dataloader">DataLoader</a></li>
  <li><a href="#dataloader.determine_reader" id="toc-dataloader.determine_reader" class="nav-link" data-scroll-target="#dataloader.determine_reader">DataLoader.determine_reader</a></li>
  <li><a href="#dataloader.load" id="toc-dataloader.load" class="nav-link" data-scroll-target="#dataloader.load">DataLoader.load</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/Defense-Circuits-Lab/findmycells/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">core</h1>
</div>

<div>
  <div class="description">
    Defines central classes that are re-used throughout the findmycells package (findmycells.core)
  </div>
</div>


<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->
<section id="handling-data-processing" class="level1">
<h1>Handling data processing</h1>
<p>The following two classes, <a href="https://Defense-Circuits-Lab.github.io/findmycells/api/core.html#processingobject"><code>ProcessingObject</code></a> and <a href="https://Defense-Circuits-Lab.github.io/findmycells/api/core.html#processingstrategy"><code>ProcessingStrategy</code></a>, provide the blueprints for all processing strategies and objects that are used throughout the <em>findmycells</em> package. As you can see in the corresponding processing step modules (i.e.&nbsp;“preprocess”, “segment”, or “quantify”), these abstract base classes provide the basic structure of the more specific objects and strategies in each of these modules (e.g.&nbsp;<a href="https://Defense-Circuits-Lab.github.io/findmycells/api/quantification_00_specs.html#quantificationobject"><code>QuantificationObject</code></a> and <a href="https://Defense-Circuits-Lab.github.io/findmycells/api/quantification_00_specs.html#quantificationstrategy"><code>QuantificationStrategy</code></a> within the “quantify” module inherit from <a href="https://Defense-Circuits-Lab.github.io/findmycells/api/core.html#processingobject"><code>ProcessingObject</code></a> and <a href="https://Defense-Circuits-Lab.github.io/findmycells/api/core.html#processingstrategy"><code>ProcessingStrategy</code></a>, respectively). While this makes these two classes highly relevant for any developer, regular users of <em>findmycells</em> won´t be interacting with them, even if they want to use the API instead of the GUI.</p>
<hr>
<p><a href="https://github.com/Defense-Circuits-Lab/findmycells/blob/main/findmycells/core.py#L16" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="processingobject" class="level3">
<h3 class="anchored" data-anchor-id="processingobject">ProcessingObject</h3>
<blockquote class="blockquote">
<pre><code> ProcessingObject ()</code></pre>
</blockquote>
<p>Abstract base class (inherits from ABC) that defines the general structure of <code>ProcessingObjects</code> in findmycells. A <a href="https://Defense-Circuits-Lab.github.io/findmycells/api/core.html#processingobject"><code>ProcessingObject</code></a> combines all information needed for the corresponding processing step, i.e.&nbsp;what files are supposed to be processed &amp; how. It also interfaces to the database of the project, such that it can automatically update the database with the latest progress.</p>
<p><strong>Associated public methods:</strong></p>
<hr>
<p><a href="https://github.com/Defense-Circuits-Lab/findmycells/blob/main/findmycells/core.py#L131" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="processingobject.export_current_gui_config_values" class="level3">
<h3 class="anchored" data-anchor-id="processingobject.export_current_gui_config_values">ProcessingObject.export_current_gui_config_values</h3>
<blockquote class="blockquote">
<pre><code> ProcessingObject.export_current_gui_config_values ()</code></pre>
</blockquote>
<p>Passes the function call further to the <a href="https://Defense-Circuits-Lab.github.io/findmycells/api/configs.html#guiconfigs"><code>GUIConfigs</code></a> object to extract the current configs.</p>
<hr>
<p><a href="https://github.com/Defense-Circuits-Lab/findmycells/blob/main/findmycells/core.py#L113" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="processingobject.initialize_gui_configs_and_widget" class="level3">
<h3 class="anchored" data-anchor-id="processingobject.initialize_gui_configs_and_widget">ProcessingObject.initialize_gui_configs_and_widget</h3>
<blockquote class="blockquote">
<pre><code> ProcessingObject.initialize_gui_configs_and_widget ()</code></pre>
</blockquote>
<p>Constructs a <a href="https://Defense-Circuits-Lab.github.io/findmycells/api/configs.html#guiconfigs"><code>GUIConfigs</code></a> from the respectively specified properties and uses the <a href="https://Defense-Circuits-Lab.github.io/findmycells/api/configs.html#guiconfigs.construct_widget"><code>GUIConfigs.construct_widget</code></a> method to build the associated widget and sets it as attribute (self.widget).</p>
<hr>
<p><a href="https://github.com/Defense-Circuits-Lab/findmycells/blob/main/findmycells/core.py#L139" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="processingobject.prepare_for_processing" class="level3">
<h3 class="anchored" data-anchor-id="processingobject.prepare_for_processing">ProcessingObject.prepare_for_processing</h3>
<blockquote class="blockquote">
<pre><code> ProcessingObject.prepare_for_processing (file_ids:List[str],
                                          database:findmycells.database.Da
                                          tabase)</code></pre>
</blockquote>
<table class="table">
<colgroup>
<col style="width: 9%">
<col style="width: 38%">
<col style="width: 52%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>file_ids</td>
<td>typing.List[str]</td>
<td>A list with the file_ids of all files that need to be processed</td>
</tr>
<tr class="even">
<td>database</td>
<td>Database</td>
<td>The database of the findmycells project</td>
</tr>
<tr class="odd">
<td><strong>Returns</strong></td>
<td><strong>None</strong></td>
<td></td>
</tr>
</tbody>
</table>
<hr>
<p><a href="https://github.com/Defense-Circuits-Lab/findmycells/blob/main/findmycells/core.py#L148" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="processingobject.run_all_strategies" class="level3">
<h3 class="anchored" data-anchor-id="processingobject.run_all_strategies">ProcessingObject.run_all_strategies</h3>
<blockquote class="blockquote">
<pre><code> ProcessingObject.run_all_strategies (strategies:List,
                                      strategy_configs:List[Dict])</code></pre>
</blockquote>
<p>Runs all ProcessingStrategies that were passed upon initialization (i.e.&nbsp;self.strategies). For this, the corresponding ProcessingStrategy objects will be initialized and their “.run()” method will be called, while passing “self” as “processing_object”. Finally, it updates the database and deletes the ProcessingStrategy object to clear it from memory.</p>
<hr>
<p><a href="https://github.com/Defense-Circuits-Lab/findmycells/blob/main/findmycells/core.py#L162" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="processingobject.update_database" class="level3">
<h3 class="anchored" data-anchor-id="processingobject.update_database">ProcessingObject.update_database</h3>
<blockquote class="blockquote">
<pre><code> ProcessingObject.update_database (mark_as_completed:bool=True)</code></pre>
</blockquote>
<p>For each microscopy file that had to be processed (self.file_ids), the database will be updated with the respective processing progress information. Interfaces back to the abstract method “self.add_processing_specific_infos_to_updates()” that enables the corresponding subclasses to add more specific details before triggering the update method of the database.</p>
<p><strong>For developers:</strong></p>
<p>Associated properties that need to be implemented in subclasses inheriting from <a href="https://Defense-Circuits-Lab.github.io/findmycells/api/core.html#processingobject"><code>ProcessingObject</code></a>. Feel free to check out the available implementations to see how this should look like, for instance in the “findmycells.preprocessing.specs” or “findmycells.segmentation.specs” submodules.</p>
<hr>
<p><a href="https://github.com/Defense-Circuits-Lab/findmycells/blob/main/findmycells/core.py#L40" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="processingobject.default_configs" class="level3">
<h3 class="anchored" data-anchor-id="processingobject.default_configs">ProcessingObject.default_configs</h3>
<blockquote class="blockquote">
<pre><code> ProcessingObject.default_configs ()</code></pre>
</blockquote>
<p>Abstract method that requires its subclasses to define the <code>default_configs</code> as a property of the class. Thus, this will specify all configuration options that come with each subclass, while simultaneously also providing default values for each option and, moreover, defining what types of values are allowed for each option. Check out the implementation of <a href="https://Defense-Circuits-Lab.github.io/findmycells/api/configs.html#defaultconfigs"><code>DefaultConfigs</code></a> in the configs module, or have a look at how this is implemented in one of the processing sub-modules, for instance in the “specs.py” file in the preprocessing sub-module.</p>
<hr>
<p><a href="https://github.com/Defense-Circuits-Lab/findmycells/blob/main/findmycells/core.py#L65" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="processingobject.descriptions" class="level3">
<h3 class="anchored" data-anchor-id="processingobject.descriptions">ProcessingObject.descriptions</h3>
<blockquote class="blockquote">
<pre><code> ProcessingObject.descriptions ()</code></pre>
</blockquote>
<p>Descriptions that will be used as “description” parameter in the created widgets.</p>
<hr>
<p><a href="https://github.com/Defense-Circuits-Lab/findmycells/blob/main/findmycells/core.py#L27" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="processingobject.processing_type" class="level3">
<h3 class="anchored" data-anchor-id="processingobject.processing_type">ProcessingObject.processing_type</h3>
<blockquote class="blockquote">
<pre><code> ProcessingObject.processing_type ()</code></pre>
</blockquote>
<p>Abstract property. Will be used in the database to keep track of the processing progress of the project. Has to be a string that matches with an available processing module (i.e.&nbsp;“preprocessing”, “segmentation”, “postprocessing”, “quantification”).</p>
<hr>
<p><a href="https://github.com/Defense-Circuits-Lab/findmycells/blob/main/findmycells/core.py#L75" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="processingobject.tooltips" class="level3">
<h3 class="anchored" data-anchor-id="processingobject.tooltips">ProcessingObject.tooltips</h3>
<blockquote class="blockquote">
<pre><code> ProcessingObject.tooltips ()</code></pre>
</blockquote>
<p>Additional information that can be displayed as tooltip by the respective widget. Unfortunately, tooltips are not available for all widget types in the ipywidgets version that is used by <em>findmycells</em>.</p>
<hr>
<p><a href="https://github.com/Defense-Circuits-Lab/findmycells/blob/main/findmycells/core.py#L55" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="processingobject.widget_names" class="level3">
<h3 class="anchored" data-anchor-id="processingobject.widget_names">ProcessingObject.widget_names</h3>
<blockquote class="blockquote">
<pre><code> ProcessingObject.widget_names ()</code></pre>
</blockquote>
<p>Defines which widgets will be created (e.g.&nbsp;“Checkbox” or “Dropdown”). See <a href="https://Defense-Circuits-Lab.github.io/findmycells/api/configs.html#guiconfigs"><code>GUIConfigs</code></a> to see a full list of available options.</p>
<p>Associated abstract methods that need to be implemented in subclasses inheriting from <a href="https://Defense-Circuits-Lab.github.io/findmycells/api/core.html#processingobject"><code>ProcessingObject</code></a>:</p>
<hr>
<p><a href="https://github.com/Defense-Circuits-Lab/findmycells/blob/main/findmycells/core.py#L85" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="processingobject._add_processing_specific_infos_to_updates" class="level3">
<h3 class="anchored" data-anchor-id="processingobject._add_processing_specific_infos_to_updates">ProcessingObject._add_processing_specific_infos_to_updates</h3>
<blockquote class="blockquote">
<pre><code> ProcessingObject._add_processing_specific_infos_to_updates (updates:Dict)</code></pre>
</blockquote>
<p>Abstract method that that requires its subclasses to define what updates need to be passed to the database, in addition to those that are already covered by the corresponding ProcessingStrategies or the “self.update_database()” method. If there are no more information to add, simply return the input ‘updates’ dictionary without any alterations.</p>
<p>Returns a dictionary with all updates that need to be passed to the database.</p>
<table class="table">
<colgroup>
<col style="width: 9%">
<col style="width: 38%">
<col style="width: 52%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th><strong>Type</strong></th>
<th><strong>Details</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>updates</td>
<td>typing.Dict</td>
<td>A dictionary with updates that need to be passed to the database</td>
</tr>
<tr class="even">
<td><strong>Returns</strong></td>
<td><strong>typing.Dict</strong></td>
<td><strong>A dictionary with all updates that need to be passed to the database</strong></td>
</tr>
</tbody>
</table>
<hr>
<p><a href="https://github.com/Defense-Circuits-Lab/findmycells/blob/main/findmycells/core.py#L100" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="processingobject._processing_specific_preparations" class="level3">
<h3 class="anchored" data-anchor-id="processingobject._processing_specific_preparations">ProcessingObject._processing_specific_preparations</h3>
<blockquote class="blockquote">
<pre><code> ProcessingObject._processing_specific_preparations ()</code></pre>
</blockquote>
<p>Allows to keep the <strong>init</strong>() method clear of any functions, which is required to be able to just instantiate a representative object to create its GUI widget (using the GUIConfigs set as attribute). Will be called in the prepare_for_processing() method and, thus, still enable processing step specific computations before the strategies are executed.</p>
<p>Leave as “pass” if nothing needs to be done here.</p>
<p><br> <br> <br></p>
<hr>
<p><a href="https://github.com/Defense-Circuits-Lab/findmycells/blob/main/findmycells/core.py#L178" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="processingstrategy" class="level3">
<h3 class="anchored" data-anchor-id="processingstrategy">ProcessingStrategy</h3>
<blockquote class="blockquote">
<pre><code> ProcessingStrategy ()</code></pre>
</blockquote>
<p>Abstract base class that defines the general structure of <code>ProcessingStrategies</code> in findmycells. A <a href="https://Defense-Circuits-Lab.github.io/findmycells/api/core.html#processingstrategy"><code>ProcessingStrategy</code></a> combines all functions that are required for one particular processing step, e.g.&nbsp;<code>ConvertTo8Bit</code> is a <a href="https://Defense-Circuits-Lab.github.io/findmycells/api/core.html#processingstrategy"><code>ProcessingStrategy</code></a> in the “preprocess” module and converts the corresponding images into 8-bit.</p>
<p><strong>Associated public methods:</strong></p>
<hr>
<p><a href="https://github.com/Defense-Circuits-Lab/findmycells/blob/main/findmycells/core.py#L294" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="processingstrategy.export_current_gui_config_values" class="level3">
<h3 class="anchored" data-anchor-id="processingstrategy.export_current_gui_config_values">ProcessingStrategy.export_current_gui_config_values</h3>
<blockquote class="blockquote">
<pre><code> ProcessingStrategy.export_current_gui_config_values ()</code></pre>
</blockquote>
<p>Passes the function call further to the <a href="https://Defense-Circuits-Lab.github.io/findmycells/api/configs.html#guiconfigs"><code>GUIConfigs</code></a> object to extract the current configs.</p>
<hr>
<p><a href="https://github.com/Defense-Circuits-Lab/findmycells/blob/main/findmycells/core.py#L278" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="processingstrategy.initialize_gui_configs_and_widget" class="level3">
<h3 class="anchored" data-anchor-id="processingstrategy.initialize_gui_configs_and_widget">ProcessingStrategy.initialize_gui_configs_and_widget</h3>
<blockquote class="blockquote">
<pre><code> ProcessingStrategy.initialize_gui_configs_and_widget ()</code></pre>
</blockquote>
<p>Constructs a <a href="https://Defense-Circuits-Lab.github.io/findmycells/api/configs.html#guiconfigs"><code>GUIConfigs</code></a> from the respectively specified properties and uses the <a href="https://Defense-Circuits-Lab.github.io/findmycells/api/configs.html#guiconfigs.construct_widget"><code>GUIConfigs.construct_widget</code></a> method to build the associated widget and sets it as attribute (self.widget).</p>
<hr>
<p><a href="https://github.com/Defense-Circuits-Lab/findmycells/blob/main/findmycells/core.py#L302" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="processingstrategy.update_tracking_histories" class="level3">
<h3 class="anchored" data-anchor-id="processingstrategy.update_tracking_histories">ProcessingStrategy.update_tracking_histories</h3>
<blockquote class="blockquote">
<pre><code> ProcessingStrategy.update_tracking_histories
                                               (processing_object:__main__
                                               .ProcessingObject,
                                               strategy_configs:Dict)</code></pre>
</blockquote>
<p><strong>For developers:</strong></p>
<p>Associated properties that need to be implemented in subclasses inheriting from <a href="https://Defense-Circuits-Lab.github.io/findmycells/api/core.html#processingstrategy"><code>ProcessingStrategy</code></a>. Feel free to check out the available implementations to see how this should look like, for instance in the “findmycells.preprocessing.specs” &amp; “findmycells.preprocessing.strategies” submodules.</p>
<hr>
<p><a href="https://github.com/Defense-Circuits-Lab/findmycells/blob/main/findmycells/core.py#L201" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="processingstrategy.default_configs" class="level3">
<h3 class="anchored" data-anchor-id="processingstrategy.default_configs">ProcessingStrategy.default_configs</h3>
<blockquote class="blockquote">
<pre><code> ProcessingStrategy.default_configs ()</code></pre>
</blockquote>
<p>Abstract method that requires its subclasses to define the <code>default_configs</code> as a property of the class. Thus, this will specify all configuration options that come with each subclass, while simultaneously also providing default values for each option and, moreover, defining what types of values are allowed for each option. Check out the implementation of <a href="https://Defense-Circuits-Lab.github.io/findmycells/api/configs.html#defaultconfigs"><code>DefaultConfigs</code></a> in the configs module, or have a look at how this is implemented in one of the processing sub-modules, for instance in the “specs.py” file in the preprocessing sub-module.</p>
<hr>
<p><a href="https://github.com/Defense-Circuits-Lab/findmycells/blob/main/findmycells/core.py#L226" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="processingstrategy.descriptions" class="level3">
<h3 class="anchored" data-anchor-id="processingstrategy.descriptions">ProcessingStrategy.descriptions</h3>
<blockquote class="blockquote">
<pre><code> ProcessingStrategy.descriptions ()</code></pre>
</blockquote>
<p>Descriptions that will be used as “description” parameter in the created widgets.</p>
<hr>
<p><a href="https://github.com/Defense-Circuits-Lab/findmycells/blob/main/findmycells/core.py#L189" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="processingstrategy.processing_type" class="level3">
<h3 class="anchored" data-anchor-id="processingstrategy.processing_type">ProcessingStrategy.processing_type</h3>
<blockquote class="blockquote">
<pre><code> ProcessingStrategy.processing_type ()</code></pre>
</blockquote>
<p>Abstract property. Will be used for instance in the database to keep track of the processing progress of the project. Has to be a string that matches with an available processing module (i.e.&nbsp;“preprocessing”, “segmentation”, “postprocessing”, “quantification”).</p>
<hr>
<p><a href="https://github.com/Defense-Circuits-Lab/findmycells/blob/main/findmycells/core.py#L236" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="processingstrategy.tooltips" class="level3">
<h3 class="anchored" data-anchor-id="processingstrategy.tooltips">ProcessingStrategy.tooltips</h3>
<blockquote class="blockquote">
<pre><code> ProcessingStrategy.tooltips ()</code></pre>
</blockquote>
<p>Additional information that can be displayed as tooltip by the respective widget. Unfortunately, tooltips are not available for all widget types in the ipywidgets version that is used by <em>findmycells</em>.</p>
<hr>
<p><a href="https://github.com/Defense-Circuits-Lab/findmycells/blob/main/findmycells/core.py#L216" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="processingstrategy.widget_names" class="level3">
<h3 class="anchored" data-anchor-id="processingstrategy.widget_names">ProcessingStrategy.widget_names</h3>
<blockquote class="blockquote">
<pre><code> ProcessingStrategy.widget_names ()</code></pre>
</blockquote>
<p>Defines which widgets will be created (e.g.&nbsp;“Checkbox” or “Dropdown”). See <a href="https://Defense-Circuits-Lab.github.io/findmycells/api/configs.html#guiconfigs"><code>GUIConfigs</code></a> to see a full list of available options.</p>
<hr>
<p><a href="https://github.com/Defense-Circuits-Lab/findmycells/blob/main/findmycells/core.py#L247" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="processingstrategy.dropdown_option_value_for_gui" class="level3">
<h3 class="anchored" data-anchor-id="processingstrategy.dropdown_option_value_for_gui">ProcessingStrategy.dropdown_option_value_for_gui</h3>
<blockquote class="blockquote">
<pre><code> ProcessingStrategy.dropdown_option_value_for_gui ()</code></pre>
</blockquote>
<p>This string will be used as the option in the strategy selection dropdown in the GUI of <em>findmycells</em>.</p>
<p>Associated abstract methods that need to be implemented in subclasses inheriting from <a href="https://Defense-Circuits-Lab.github.io/findmycells/api/core.html#processingstrategy"><code>ProcessingStrategy</code></a>:</p>
<hr>
<p><a href="https://github.com/Defense-Circuits-Lab/findmycells/blob/main/findmycells/core.py#L256" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="processingstrategy.run" class="level3">
<h3 class="anchored" data-anchor-id="processingstrategy.run">ProcessingStrategy.run</h3>
<blockquote class="blockquote">
<pre><code> ProcessingStrategy.run (processing_object:__main__.ProcessingObject,
                         strategy_configs:Dict)</code></pre>
</blockquote>
<p>Here comes the code that actually does the processing of the data.</p>
<hr>
<p><a href="https://github.com/Defense-Circuits-Lab/findmycells/blob/main/findmycells/core.py#L264" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="processingstrategy._add_strategy_specific_infos_to_updates" class="level3">
<h3 class="anchored" data-anchor-id="processingstrategy._add_strategy_specific_infos_to_updates">ProcessingStrategy._add_strategy_specific_infos_to_updates</h3>
<blockquote class="blockquote">
<pre><code> ProcessingStrategy._add_strategy_specific_infos_to_updates (updates:Dict)</code></pre>
</blockquote>
<p>Allows to add processing specific information that is deemed relevant to the <a href="https://Defense-Circuits-Lab.github.io/findmycells/api/database.html#filehistory"><code>FileHistory</code></a> objects in the <a href="https://Defense-Circuits-Lab.github.io/findmycells/api/database.html#database"><code>Database</code></a>. If there are no relevant information, simply return the “updates” dictionary again without changes.</p>
<p><br> <br> <br></p>
</section>
</section>
<section id="handling-data-import" class="level1">
<h1>Handling data import</h1>
<p>Furthermore, the following two classes <a href="https://Defense-Circuits-Lab.github.io/findmycells/api/core.html#dataloader"><code>DataLoader</code></a> and <a href="https://Defense-Circuits-Lab.github.io/findmycells/api/core.html#datareader"><code>DataReader</code></a> will be re-used throughout the <em>findmycells</em> package to load data into your <em>findmycells</em> project. You can find the specific implementations of <a href="https://Defense-Circuits-Lab.github.io/findmycells/api/core.html#datareader"><code>DataReader</code></a>s in the findmycells.reader module.</p>
<hr>
<p><a href="https://github.com/Defense-Circuits-Lab/findmycells/blob/main/findmycells/core.py#L340" target="_blank" style="float:right; font-size:smaller">source</a></p>
<section id="datareader" class="level3">
<h3 class="anchored" data-anchor-id="datareader">DataReader</h3>
<blockquote class="blockquote">
<pre><code> DataReader ()</code></pre>
</blockquote>
<p>Abstract base class that defines the general structure of DataReader subclasses. Essentially, it demands the corresponding subclasses to define the “readable_filetype_extensions” attribut, as well as the “set_optional_configs()” and the “read()” methods.</p>
<p><strong>Associated public methods (all abstract methods, that need to be implemented):</strong></p>
<hr>
<p><a href="https://github.com/Defense-Circuits-Lab/findmycells/blob/main/findmycells/core.py#L358" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="datareader.read" class="level3">
<h3 class="anchored" data-anchor-id="datareader.read">DataReader.read</h3>
<blockquote class="blockquote">
<pre><code> DataReader.read (filepath:pathlib.Path, reader_configs:Dict)</code></pre>
</blockquote>
<p>This method eventually reads the data stored at the given filepath applying the specified configs. The returned datatype will be different for each DataReader subclass, e.g.&nbsp;a numpy array of a specific shape for MicroscopyImageReaders, or a shapely Polygon for ROIReaders.</p>
<hr>
<p><a href="https://github.com/Defense-Circuits-Lab/findmycells/blob/main/findmycells/core.py#L368" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="datareader.assert_correct_output_format" class="level3">
<h3 class="anchored" data-anchor-id="datareader.assert_correct_output_format">DataReader.assert_correct_output_format</h3>
<blockquote class="blockquote">
<pre><code> DataReader.assert_correct_output_format (output:Any)</code></pre>
</blockquote>
<p>Run an assert to validate that the data was actually read in the correct way and that the created output matches the intended format!</p>
<p><br> <br> <br></p>
<hr>
<p><a href="https://github.com/Defense-Circuits-Lab/findmycells/blob/main/findmycells/core.py#L376" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="dataloader" class="level3">
<h3 class="anchored" data-anchor-id="dataloader">DataLoader</h3>
<blockquote class="blockquote">
<pre><code> DataLoader ()</code></pre>
</blockquote>
<p>Works as an interface between whatever needs to import data (e.g.&nbsp;a <a href="https://Defense-Circuits-Lab.github.io/findmycells/api/preprocessing_00_specs.html#preprocessingobject"><code>PreprocessingObject</code></a>) and the <a href="https://Defense-Circuits-Lab.github.io/findmycells/api/core.html#datareader"><code>DataReader</code></a>s. It will look for an adequate reader implemented for the specific data type (i.e.&nbsp;filetype) at hand.</p>
<p><strong>Associated public methods:</strong></p>
<hr>
<p><a href="https://github.com/Defense-Circuits-Lab/findmycells/blob/main/findmycells/core.py#L384" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="dataloader.determine_reader" class="level3">
<h3 class="anchored" data-anchor-id="dataloader.determine_reader">DataLoader.determine_reader</h3>
<blockquote class="blockquote">
<pre><code> DataLoader.determine_reader (file_extension:str,
                              data_reader_module:module)</code></pre>
</blockquote>
<p>Check whether there is a reader implemented in the requested reader submodule that can handle the specified filetype inferred from its extension.</p>
<hr>
<p><a href="https://github.com/Defense-Circuits-Lab/findmycells/blob/main/findmycells/core.py#L400" target="_blank" style="float:right; font-size:smaller">source</a></p>
</section>
<section id="dataloader.load" class="level3">
<h3 class="anchored" data-anchor-id="dataloader.load">DataLoader.load</h3>
<blockquote class="blockquote">
<pre><code> DataLoader.load (data_reader_class:__main__.DataReader,
                  filepath:pathlib.PosixPath, reader_configs:Dict)</code></pre>
</blockquote>
<p>Uses the provided <a href="https://Defense-Circuits-Lab.github.io/findmycells/api/core.html#datareader"><code>DataReader</code></a> subclass to import the data.</p>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>